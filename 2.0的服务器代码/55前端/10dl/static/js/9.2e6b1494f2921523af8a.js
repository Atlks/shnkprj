webpackJsonp([9],{ZtpF:function(t,a){},oprI:function(t,a){},zg2J:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("gyMJ"),s=e("mtWM"),n=e.n(s),p=e("mw3O"),o=e.n(p),r={name:"appMerging",data:function(){return{headers:{headers:{token:localStorage.getItem("token")}},progressFlag:!1,progressPercent:0,limitCount:1,downInput:"",tishi:!1,apkvalue:""}},methods:{newuploadapk:function(t){var a=this,e=new FormData,s=Math.round(new Date/1e3);n.a.get(i.a+"/api/common/ossToken",this.headers).then(function(i){if(0==i.data.code)a.$message.error(i.data.msg);else{e.append("policy",i.data.data.policy),e.append("success_action_status",200),e.append("signature",i.data.data.signature),e.append("OSSAccessKeyId",i.data.data.accessid),e.append("name",a.$md5(t.file.name.split(".apk")[0])+s+".apk"),e.append("key",i.data.data.dir+a.$md5(t.file.name.split(".apk")[0])+s+".apk"),e.append("file",t.file),a.apkvalue=i.data.data.dir+a.$md5(t.file.name.split(".apk")[0])+s+".apk",a.progressFlag=!0;var p={headers:{token:localStorage.getItem("Authorization")},onUploadProgress:function(t){a.progressPercent=Number((t.loaded/t.total*100).toFixed(2))}};n.a.post(i.data.data.host,e,p).then(function(t){a.progressFlag=!1,0==t.data.code?a.$message.error(t.data.msg):a.downInput=a.apkvalue},function(t){a.$message.error("上传apk包失败")})}},function(t){a.$message.error("上传apk包失败")})},bangzhu:function(){this.tishi=!this.tishi},helpleave:function(){this.tishi=!1},preservation:function(){var t=this,a={app_id:this.$route.query.id,apk_url:this.downInput};n.a.post(i.a+"/api/app/apkUrl",o.a.stringify(a),this.headers).then(function(a){200==a.data.code?t.$router.push({path:"/myApp"}):0==a.data.code&&t.$message.error(a.data.msg)},function(t){})}},mounted:function(){var t=this,a={id:this.$route.query.id};n.a.post(i.a+"/api/app/appDes",o.a.stringify(a),this.headers).then(function(a){t.downInput=a.data.data.apk_url},function(t){})}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"appMerging"}},[e("div",{staticClass:"applicationMerge"},[e("div",{staticClass:"applicationMergeOne"},[e("div",{staticClass:"applicationMergeOneFirst"},[e("p",[t._v("Andriod下载地址")]),t._v(" "),e("el-tooltip",{attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v("Andriod手机打开您的下载地址"),e("br"),t._v("并点击安装时，会自动使用该地"),e("br"),t._v("， 址进行下载。")]),t._v(" "),e("img",{staticStyle:{"margin-left":"10px"},attrs:{src:"//wbpp.h83k.net/static/image/myApp/bangzhu.png",alt:""}})])],1),t._v(" "),e("div",{staticStyle:{display:"flex","margin-top":"20px"}},[e("el-input",{staticClass:"seachInput",on:{input:t.downInput},model:{value:t.downInput,callback:function(a){t.downInput=a},expression:"downInput"}})],1)]),t._v(" "),e("div",{staticClass:"applicationMergeTwo"},[e("p",{staticClass:"applicationMergeTwoP"},[t._v("Andriod应用上传")]),t._v(" "),e("div",{staticClass:"applicationMergeTwoSmall"},[e("el-upload",{attrs:{limit:t.limitCount,"show-file-list":!1,accept:".apk",action:"string","http-request":t.newuploadapk,multiple:""}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传apk文件，且不超过2G")])],1)],1),t._v(" "),1==t.progressFlag?e("el-progress",{attrs:{percentage:t.progressPercent}}):t._e()],1),t._v(" "),e("div",{staticClass:"preservation",on:{click:t.preservation}},[e("p",[t._v("保存")])])])])},staticRenderFns:[]};var l=e("VU/8")(r,d,!1,function(t){e("oprI"),e("ZtpF")},"data-v-6251a352",null);a.default=l.exports}});