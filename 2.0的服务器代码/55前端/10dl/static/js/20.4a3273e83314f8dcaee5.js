webpackJsonp([20],{CKdL:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("gyMJ"),n=e("mtWM"),s=e.n(n),o=e("mw3O"),r=e.n(o),l={name:"downloadCode",data:function(){return{allCheck:!1,tableDataAll:[],headers:{headers:{token:localStorage.getItem("token")}},downSumOptions:[{value:"删除"}],input:"",input2:"",input3:"",isMask:!1,isMask2:!1,total:0,pageNumber:"",current:1,tableData:[],multipleSelection:[],newArry:[],type:""}},methods:{allCheckEvent:function(t){var a=this;1==this.allCheck?t.forEach(function(t){a.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){var a=this;this.multipleSelection=[],this.newArry=[],this.multipleSelection=t,this.multipleSelection.forEach(function(t){a.newArry.push(t.id)})},shanchuClick:function(t){var a=this,e={id:t,type:4};s.a.post(i.a+"/api/app/downloadCodeHandle",r.a.stringify(e),this.headers).then(function(t){var e={app_id:a.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),a.headers).then(function(t){a.tableData=t.data.data.list,a.total=t.data.data.total,a.pageNumber=parseInt(Math.ceil(Number(a.total)/10)),a.current=1},function(t){})},function(t){})},exportBtn:function(){var t={app_id:this.$route.query.id};s.a.post(i.a+"/api/app/export",r.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded",token:localStorage.getItem("token")},responseType:"blob"}).then(function(t){console.log(t);var a=new Blob([t.data]),e=document.createElement("a");e.download="下载码.xlsx",e.style.display="none",e.href=URL.createObjectURL(a),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}).catch(function(t){console.log(t)})},changeSort:function(t){var a=this,e={app_id:this.$route.query.id,page:1,page_size:10,order:t.prop,sort:t.order};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),this.headers).then(function(t){a.tableData=t.data.data.list,a.total=t.data.data.total,a.pageNumber=parseInt(Math.ceil(Number(a.total)/10)),a.current=1},function(t){})},inputOne:function(){if(""!=this.input2){/^\d+$/.test(this.input2)?this.input2>100&&(this.$message.error("不能大于100"),this.input2=""):(this.$message.error("只能输入整数"),this.input2="")}},inputTwo:function(){if(""!=this.input3){/^\d+$/.test(this.input3)?this.input3>1e4&&(this.$message.error("不能大于10000"),this.input3=""):(this.$message.error("只能输入整数"),this.input3="")}},chuangjian:function(){this.isMask2=!0,this.input2="",this.input3=""},seachInput:function(){var t=this,a={app_id:this.$route.query.id,keywords:this.input,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(a),this.headers).then(function(a){t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10))},function(t){})},open:function(){this.isMask=!0},close:function(){this.isMask=!1,this.isMask2=!1},indexChange:function(t){var a=this,e={app_id:this.$route.query.id,page:t,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),this.headers).then(function(t){a.total=t.data.data.total,a.pageNumber=parseInt(Math.ceil(Number(a.total)/10)),a.tableData=t.data.data.list},function(t){})},pageChange:function(t){},start:function(){var t=this;if(1==this.allCheck){var a={ids:this.newArry.toString(),type:1,status:1,app_id:this.$route.query.id};s.a.post(i.a+"/api/app/downloadCodeMulti",r.a.stringify(a),this.headers).then(function(a){if(0==a.data.code)t.$message.error(a.data.msg);else{var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.allCheck=!1,t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}},function(t){})}else{var e={ids:this.newArry.toString(),type:1,status:2};s.a.post(i.a+"/api/app/downloadCodeMulti",r.a.stringify(e),this.headers).then(function(a){if(0==a.data.code)t.$message.error(a.data.msg);else{var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}},function(t){})}},end:function(){var t=this;if(1==this.allCheck){var a={ids:this.newArry.toString(),type:2,status:1,app_id:this.$route.query.id};s.a.post(i.a+"/api/app/downloadCodeMulti",r.a.stringify(a),this.headers).then(function(a){if(0==a.data.code)t.$message.error(a.data.msg);else{var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.allCheck=!1,t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}},function(t){})}else{var e={ids:this.newArry.toString(),type:2,status:2};s.a.post(i.a+"/api/app/downloadCodeMulti",r.a.stringify(e),this.headers).then(function(a){if(0==a.data.code)t.$message.error(a.data.msg);else{var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}},function(t){})}},del:function(){var t=this;1==this.allCheck?this.$confirm("此操作将删除所有下载码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={ids:t.newArry.toString(),type:1,app_id:t.$route.query.id};s.a.post(i.a+"/api/app/downloadCodeDel",r.a.stringify(a),t.headers).then(function(a){if(0==a.data.code)t.$message.error(a.data.msg);else{var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.allCheck=!1,t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}},function(t){})}).catch(function(){}):this.$confirm("此操作将删除选中下载码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={ids:t.newArry.toString(),type:0,app_id:t.$route.query.id};s.a.post(i.a+"/api/app/downloadCodeDel",r.a.stringify(a),t.headers).then(function(a){if(0==a.data.code)t.$message.error(a.data.msg);else{var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}},function(t){})}).catch(function(){})},swich:function(t){var a=this;if(1==t.status){var e={id:t.id,type:2};s.a.post(i.a+"/api/app/downloadCodeHandle",r.a.stringify(e),this.headers).then(function(t){var e={app_id:a.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),a.headers).then(function(t){a.tableData=t.data.data.list,a.total=t.data.data.total,a.pageNumber=parseInt(Math.ceil(Number(a.total)/10)),a.current=1},function(t){})},function(t){})}else{var n={id:t.id,type:1};s.a.post(i.a+"/api/app/downloadCodeHandle",r.a.stringify(n),this.headers).then(function(t){var e={app_id:a.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),a.headers).then(function(t){a.tableData=t.data.data.list,a.total=t.data.data.total,a.pageNumber=parseInt(Math.ceil(Number(a.total)/10)),a.current=1},function(t){})},function(t){})}},okBtn:function(){var t=this,a={app_id:this.$route.query.id,number:this.input2,num:this.input3};s.a.post(i.a+"/api/app/addDownloadCode",r.a.stringify(a),this.headers).then(function(a){if(200==a.data.code){t.$message.success(a.data.msg);var e={app_id:t.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(e),t.headers).then(function(a){t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10)),t.current=1},function(t){})}else t.$message.error(a.data.msg)},function(t){}),this.isMask2=!1},cancelBtn:function(){this.isMask2=!1}},mounted:function(){var t=this,a={app_id:this.$route.query.id,page:1,page_size:10};s.a.post(i.a+"/api/app/downloadCodeList",r.a.stringify(a),this.headers).then(function(a){t.tableData=a.data.data.list,t.total=a.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/10))},function(t){})}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"downloadCode"}},[t.isMask?e("div",{staticClass:"mask"},[e("div",{staticClass:"downloadCodeMask"},[e("img",{attrs:{src:"//wpp.m2ld4.com/static/image/myApp/guanbi.png",alt:""},on:{click:t.close}}),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)])]):t._e(),t._v(" "),e("el-dialog",{attrs:{title:"创建下载码",visible:t.isMask2,width:"613px","close-on-click-modal":!1},on:{"update:visible":function(a){t.isMask2=a}}},[e("div",{staticClass:"maskDivThird"},[e("p",[t._v("创建个数 "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),e("el-input",{staticClass:"seachInput2",on:{input:t.inputOne},model:{value:t.input2,callback:function(a){t.input2=a},expression:"input2"}})],1),t._v(" "),e("div",{staticClass:"maskDivThird"},[e("p",[t._v("单个使用次数  "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),e("el-input",{staticClass:"seachInput2",on:{input:t.inputTwo},model:{value:t.input3,callback:function(a){t.input3=a},expression:"input3"}})],1),t._v(" "),e("div",{staticClass:"fourthDiv"},[e("div",{staticClass:"okBtn",on:{click:t.okBtn}},[e("p",[t._v("确定")])]),t._v(" "),e("div",{staticClass:"cancelBtn",on:{click:t.cancelBtn}},[e("p",[t._v("取消")])])])]),t._v(" "),e("div",{staticClass:"downloadCodeMain"},[e("div",{staticClass:"downloadCodeMainSmallOne"},[e("div",{staticClass:"establish",on:{click:t.chuangjian}},[e("p",[t._v("创建下载码")])]),t._v(" "),e("img",{attrs:{src:"//wpp.m2ld4.com/static/image/myApp/gengduo.png",alt:""},on:{click:t.open}})]),t._v(" "),e("div",{staticClass:"downloadCodeMainSmall"},[e("el-input",{staticClass:"seachInput",attrs:{placeholder:"搜索下载码","prefix-icon":"el-icon-search"},on:{change:t.seachInput},model:{value:t.input,callback:function(a){t.input=a},expression:"input"}}),t._v(" "),e("div",{staticClass:"start",on:{click:t.start}},[e("p",[t._v("批量开启")])]),t._v(" "),e("div",{staticClass:"end",on:{click:t.end}},[e("p",[t._v("批量禁用")])]),t._v(" "),e("div",{staticClass:"end",on:{click:t.del}},[e("p",[t._v("批量删除")])]),t._v(" "),e("div",{staticClass:"export",on:{click:t.exportBtn}},[e("p",[t._v("一键导出")])])],1)]),t._v(" "),e("div",{staticClass:"downLoadRecordDiv"},[e("el-checkbox",{on:{change:function(a){return t.allCheckEvent(t.tableData)}},model:{value:t.allCheck,callback:function(a){t.allCheck=a},expression:"allCheck"}},[t._v("全选(包含分页表格所有数据)")]),t._v(" "),e("div",{staticClass:"secondDiv01"},[e("el-table",{ref:"multipleTable",staticStyle:{width:"100%","font-size":"13.8px",color:"#AAAAAA"},attrs:{data:t.tableData,stripe:"","tooltip-effect":"dark",align:"center","header-cell-style":{background:"#EFF1FA"}},on:{"sort-change":t.changeSort,"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"code",align:"center",label:"下载码",sortable:"custom"}}),t._v(" "),e("el-table-column",{attrs:{prop:"num",align:"center",sortable:"custom",label:"可使用次数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"used",align:"center",sortable:"custom",label:"已使用次数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"surplus",align:"center",sortable:"custom",label:"剩余使用次数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"create_time",align:"center",sortable:"custom",label:"创建时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-switch",{attrs:{"active-color":"#2F82FF","inactive-color":"#DCDCDC"},on:{change:function(e){return t.swich(a.row)}},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:1==a.row.status,callback:function(e){t.$set(a.row,"status==1? true:false",e)},expression:"scope.row.status==1? true:false "}})],1)]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"operation",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"shanchu",on:{click:function(e){return e.stopPropagation(),t.shanchuClick(t.tableData[a.$index].id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"paging"},[e("p",[t._v("共"),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.pageNumber))]),t._v(" 页/ "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.total))]),t._v("条记录")]),t._v(" "),e("Page",{attrs:{"page-size":10,current:t.current,total:t.total},on:{"on-change":t.indexChange,"on-page-size-change":t.pageChange}})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"downtext textone"},[a("h3",[this._v("什么是下载码?")]),this._v(" "),a("p",[this._v("下载码是为使用iOS超级签名的客户推出的一项免费服务，提供下载安装防护机制。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"downtext"},[a("h3",[this._v("如何使用下载码?")]),this._v(" "),a("p",[this._v("当下载码功能开启时，没有使用过下载码的用户下载该APP在安装时，需要输入正确的下载码。已下载过该APP的用户，下次安装不需要再输入下载码，可直接安装。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"downtext"},[a("h3",[this._v("下载码下载次数用完了怎么办?")]),this._v(" "),a("p",[this._v("每个下载码最多使用次数为10000次。当某个下载码没有剩余使用次数时，用户使用此下载码将无法安装下载。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"downtext"},[a("h3",[this._v("使用下载码的优势")]),this._v(" "),a("p",[this._v("开启下载码功能后，可以对APP的流量进行有效的防护和控制，还可以对渠道或是客户群体进行管理，通过出售或赠送下载码的方式邀请重要客户进行下载，减少分发成本。")])])}]};var c=e("VU/8")(l,d,!1,function(t){e("ZNVA")},"data-v-67668387",null);a.default=c.exports},ZNVA:function(t,a){}});