webpackJsonp([2],{MKqU:function(t,e){},O1qX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("gyMJ"),s=a("mtWM"),i=a.n(s),o=(a("mw3O"),{name:"userManagement",data:function(){return{pageshow:!0,member_count:"",equipment_count:"",download_count:"",member_num:"",input:"",headers:{headers:{token:localStorage.getItem("token")}},total:0,pageNumber:"",current:1,pageSize:8,tableData:[],idList:[],isAdd:!1,userInput:"",nickName:"",phonenum:"",feilv:"",num:"",passWOrd:"",isModify:!1,userInput1:"",nickNameInput:"",phonenum1:"",feilv1:"",muValue:"",num1:"",passWOrd1:"",radio:1,newId:"",yema:"",order_type:"",order_field:""}},methods:{aa:function(){},handleSizeChange:function(t){var e=this;this.$refs.diyTable.scrollTop=0,this.$store.commit("set_page",1),this.$store.commit("set_pageSize",t),this.current=1,this.pageSize=t;var a={mobile:this.input,page:1,page_size:t,order_field:this.order_field,order_type:this.order_type};i.a.post(n.a+"/api/user/user_list",a,this.headers).then(function(t){e.total=t.data.data.total,e.pageNumber=parseInt(Math.ceil(Number(e.total)/8)),e.tableData=t.data.data.list},function(t){console.log(t)})},handleCurrentChange:function(t){var e=this;this.$refs.diyTable.scrollTop=0,this.$store.commit("set_page",t),this.current=Number(t);var a={mobile:this.input,page:t,page_size:this.pageSize,order_field:this.order_field,order_type:this.order_type};i.a.post(n.a+"/api/user/user_list",a,this.headers).then(function(t){e.total=t.data.data.total,e.pageNumber=parseInt(Math.ceil(Number(e.total)/8)),e.tableData=t.data.data.list},function(t){console.log(t)})},changeSort:function(t){var e=this;console.log(t.prop),console.log(t.order),this.order_field=t.prop,this.$store.commit("set_order_field",this.order_field),"descending"==t.order?this.order_type="DESC":this.order_type="ASC",this.$store.commit("set_order_type",this.order_type);var a={mobile:this.input,page:this.current,page_size:8,order_field:this.order_field,order_type:this.order_type};i.a.post(n.a+"/api/user/user_list",a,this.headers).then(function(t){e.total=t.data.data.total,e.pageNumber=parseInt(Math.ceil(Number(e.total)/8)),e.tableData=t.data.data.list},function(t){console.log(t)})},seachInput:function(){var t=this,e={mobile:this.input,page:1,page_size:8};i.a.post(n.a+"/api/user/user_list",e,this.headers).then(function(e){t.total=e.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/8)),t.tableData=e.data.data.list},function(t){console.log(t)})},add:function(){this.isAdd=!0,this.empty()},addOk:function(){var t=this,e={username:this.userInput,nickname:this.nickName,mobile:this.phonenum,rate:this.feilv,sign_num:this.num,password:this.passWOrd};i.a.post(n.a+"/api/user/userAdd",e,this.headers).then(function(e){if(0==e.data.code)t.$message.error(e.data.msg);else{t.isAdd=!1,t.$message({message:"新增成功",type:"success"});var a={mobile:t.input,page:1,page_size:8};i.a.post(n.a+"/api/user/user_list",a,t.headers).then(function(e){t.total=e.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/8)),t.tableData=e.data.data.list},function(t){console.log(t)}),i.a.get(n.a+"/api/user/index",t.headers).then(function(e){t.member_num=e.data.data.sign_num,t.download_count=e.data.data.download_count,t.equipment_count=e.data.data.equipment_count,t.member_count=e.data.data.member_count},function(t){console.log(t)})}},function(t){console.log(t)})},addCancel:function(){this.isAdd=!1,this.empty()},del:function(){var t=this;0==this.idList.length?this.$confirm("请选择行后再删除","提示",{showCancelButton:!1,confirmButtonText:"确定",type:"warning"}).then(function(){}).catch(function(){}):this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:t.idList,type:1};i.a.post(n.a+"/api/user/userHandle",e,t.headers).then(function(e){var a={mobile:t.input,page:1,page_size:8};i.a.post(n.a+"/api/user/user_list",a,t.headers).then(function(e){t.total=e.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/8)),t.tableData=e.data.data.list},function(t){console.log(t)}),i.a.get(n.a+"/api/user/index",t.headers).then(function(e){t.member_num=e.data.data.member_num,t.download_count=e.data.data.download_count,t.equipment_count=e.data.data.equipment_count,t.member_count=e.data.data.member_count},function(t){console.log(t)})},function(t){console.log(t)})}).catch(function(){})},handleSelectionChange:function(t){this.idList=[];for(var e=0;e<t.length;e++)this.idList.push(t[e].id)},selectCheck:function(t,e){},tableTr:function(t){this.$router.push({path:"/appManagement",query:{id:t.id}})},chakanClick:function(t,e){this.$router.push({path:"/appManagement",query:{id:e}})},deleteClick:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e,type:1};i.a.post(n.a+"/api/user/userHandle",t,a.headers).then(function(t){var e={mobile:a.input,page:1,page_size:8};i.a.post(n.a+"/api/user/user_list",e,a.headers).then(function(t){a.total=t.data.data.total,a.pageNumber=parseInt(Math.ceil(Number(a.total)/8)),a.tableData=t.data.data.list},function(t){console.log(t)}),i.a.get(n.a+"/api/user/index",a.headers).then(function(t){a.member_num=t.data.data.member_num,a.download_count=t.data.data.download_count,a.equipment_count=t.data.data.equipment_count,a.member_count=t.data.data.member_count},function(t){console.log(t)})},function(t){console.log(t)})}).catch(function(){})},motifyClick:function(t){this.newId=t.id,this.isModify=!0,this.userInput1=t.username,this.nickNameInput=t.nickname,this.phonenum1=t.mobile,this.feilv1=t.rate,this.muValue=t.sign_num,this.num1=0},addOk1:function(){var t=this,e={id:this.newId,type:2,num_type:this.radio,num:Number(this.num1),password:this.passWOrd1,username:this.userInput1,nickname:this.nickNameInput,mobile:this.phonenum1,rate:this.feilv1};i.a.post(n.a+"/api/user/userHandle",e,this.headers).then(function(e){if(0==e.data.code)t.$message.error(e.data.msg);else{t.$message.success(e.data.msg),t.isModify=!1;var a={mobile:t.input,page:1,page_size:8};i.a.post(n.a+"/api/user/user_list",a,t.headers).then(function(e){t.total=e.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/8)),t.tableData=e.data.data.list},function(t){console.log(t)}),i.a.get(n.a+"/api/user/index",t.headers).then(function(e){t.member_num=e.data.data.member_num,t.download_count=e.data.data.download_count,t.equipment_count=e.data.data.equipment_count,t.member_count=e.data.data.member_count},function(t){console.log(t)})}},function(t){console.log(t)})},addCancel1:function(){this.isModify=!1},indexChange:function(t){var e=this;this.$store.commit("set_page",t),this.current=t;var a={mobile:this.input,page:t,page_size:8,order_field:this.order_field,order_type:this.order_type};i.a.post(n.a+"/api/user/user_list",a,this.headers).then(function(t){e.total=t.data.data.total,e.pageNumber=parseInt(Math.ceil(Number(e.total)/8)),e.tableData=t.data.data.list},function(t){console.log(t)})},pageChange:function(t){console.log(t)},empty:function(){this.userInput="",this.nickName="",this.phonenum="",this.feilv="",this.num="",this.passWOrd=""}},mounted:function(){var t=this;console.log(this.$store.state.page,"this.$store.state.page"),i.a.get(n.a+"/api/user/index",this.headers).then(function(e){t.member_num=e.data.data.sign_num,t.download_count=e.data.data.download_count,t.equipment_count=e.data.data.equipment_count,t.member_count=e.data.data.member_count},function(t){console.log(t)}),""!=this.$store.state.page?this.current=Number(this.$store.state.page):this.current=1,""!=this.$store.state.pageSize?this.pageSize=Number(this.$store.state.pageSize):this.pageSize=8,this.order_field=this.$store.state.order_field,this.order_type=this.$store.state.order_type;var e={mobile:this.input,order_field:this.order_field,order_type:this.order_type,page:this.current,page_size:this.pageSize};i.a.post(n.a+"/api/user/user_list",e,this.headers).then(function(e){t.total=e.data.data.total,t.pageNumber=parseInt(Math.ceil(Number(t.total)/8)),t.tableData=e.data.data.list,t.current=Number(e.data.data.currentPage)},function(t){console.log(t)})}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userManagement"}},[a("el-dialog",{attrs:{title:"新增",visible:t.isAdd,width:"650px","close-on-click-modal":!1},on:{"update:visible":function(e){t.isAdd=e}}},[a("div",{staticClass:"maskContent"},[a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("用户")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请输入用户名"},model:{value:t.userInput,callback:function(e){t.userInput=e},expression:"userInput"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("昵称")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请输入昵称"},model:{value:t.nickName,callback:function(e){t.nickName=e},expression:"nickName"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("电话")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请输入电话号码"},model:{value:t.phonenum,callback:function(e){t.phonenum=e},expression:"phonenum"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("费率(元/次)")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请输入费率"},model:{value:t.feilv,callback:function(e){t.feilv=e},expression:"feilv"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("次数")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请输入次数"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("密码")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请填写密码"},model:{value:t.passWOrd,callback:function(e){t.passWOrd=e},expression:"passWOrd"}})],1),t._v(" "),a("div",{staticClass:"footerBTN"},[a("div",{on:{click:t.addOk}},[t._v("确定")]),t._v(" "),a("div",{on:{click:t.addCancel}},[t._v("取消")])])])]),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.isModify,width:"650px","close-on-click-modal":!1},on:{"update:visible":function(e){t.isModify=e}}},[a("div",{staticClass:"maskContent"},[a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("用户")]),t._v(" "),a("p",{staticClass:"firstInput"},[t._v(t._s(t.userInput1))])]),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("昵称")]),t._v(" "),a("el-input",{staticClass:"firstInput",model:{value:t.nickNameInput,callback:function(e){t.nickNameInput=e},expression:"nickNameInput"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("密码")]),t._v(" "),a("el-input",{staticClass:"firstInput",attrs:{placeholder:"请填写密码"},model:{value:t.passWOrd1,callback:function(e){t.passWOrd1=e},expression:"passWOrd1"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("电话")]),t._v(" "),a("el-input",{staticClass:"firstInput",model:{value:t.phonenum1,callback:function(e){t.phonenum1=e},expression:"phonenum1"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("费率(元/次)")]),t._v(" "),a("el-input",{staticClass:"firstInput",model:{value:t.feilv1,callback:function(e){t.feilv1=e},expression:"feilv1"}})],1),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("当前次数")]),t._v(" "),a("p",{staticClass:"firstInput"},[t._v(t._s(t.muValue))])]),t._v(" "),a("div",{staticClass:"maskContentOne"},[a("p",{staticClass:"text"},[t._v("修改次数")]),t._v(" "),a("div",{staticClass:"firstInput xiugai"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-radio",{attrs:{label:1},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("增加")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("减少")]),t._v(" "),a("el-input",{staticClass:"numInput",model:{value:t.num1,callback:function(e){t.num1=e},expression:"num1"}})],1),t._v(" "),a("p",{staticClass:"xiugaiP"},[t._v("选择增加或减少该用户次数，点击确定后生效")])])]),t._v(" "),a("div",{staticClass:"footerBTN"},[a("div",{on:{click:t.addOk1}},[t._v("确定")]),t._v(" "),a("div",{on:{click:t.addCancel1}},[t._v("取消")])])])]),t._v(" "),a("div",{staticClass:"userManagementMain"},[a("div",{staticClass:"userManagementMainFirst"},[a("div",{staticStyle:{width:"97%",display:"flex","justify-content":"space-between","align-items":"center",margin:"0 auto"}},[a("div",{staticClass:"userManagementMainFirstOne"},[a("img",{attrs:{src:"//wsd.58z.org/dladmin/static/image/index/user_hs.png",alt:""}}),t._v(" "),a("div",{staticClass:"userManagementMainFirstOneSmall"},[a("p",[t._v("总下载次数")]),t._v(" "),a("p",[t._v(t._s(t.download_count))])])]),t._v(" "),a("div",{staticClass:"userManagementMainFirstOne"},[a("img",{attrs:{src:"//wsd.58z.org/dladmin/static/image/index/user_zx.png",alt:""}}),t._v(" "),a("div",{staticClass:"userManagementMainFirstOneSmall"},[a("p",[t._v("下载设备总数")]),t._v(" "),a("p",[t._v(t._s(t.equipment_count))])])]),t._v(" "),a("div",{staticClass:"userManagementMainFirstOne"},[a("img",{attrs:{src:"//wsd.58z.org/dladmin/static/image/index/user_fs.png",alt:""}}),t._v(" "),a("div",{staticClass:"userManagementMainFirstOneSmall"},[a("p",[t._v("会员数")]),t._v(" "),a("p",[t._v(t._s(t.member_count))])])]),t._v(" "),a("div",{staticClass:"userManagementMainFirstOne"},[a("div",{staticClass:"userManagementMainFirstOneSmall"},[a("p",[t._v("用户剩余次数")]),t._v(" "),a("p",[t._v(t._s(t.member_num))])])])])]),t._v(" "),a("div",{staticClass:"userManagementMainSecond"},[a("div",{staticClass:"userManagementMainSecondMain"},[a("div",{staticClass:"userManagementMainSecondMainF"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("p",{staticClass:"add",on:{click:t.add}},[a("span",[t._v("+")]),t._v("新增")]),t._v(" "),a("p",{staticClass:"del",on:{click:t.del}},[t._v("删除")])]),t._v(" "),a("el-input",{staticClass:"seachInput",attrs:{placeholder:"根据手机号搜索","prefix-icon":"el-icon-search"},on:{input:t.seachInput},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),a("div",{ref:"diyTable",staticClass:"userManagementMainSecondMainS"},[a("el-table",{attrs:{align:"center",data:t.tableData,"header-cell-style":{background:"#EFF1FA"}},on:{"row-click":t.tableTr,"sort-change":t.changeSort,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"},on:{select:function(e){return t.selectCheck(t.selection,t.row)}}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{on:{click:function(e){return e.stopPropagation(),t.aa()}}},[t._v(t._s(e.row.username))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{on:{click:function(e){return e.stopPropagation(),t.aa()}}},[t._v(t._s(e.row.nickname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{on:{click:function(e){return e.stopPropagation(),t.aa()}}},[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"rate",label:"费率(元/次)",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sign_num",label:"剩余",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used",label:"已用",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logintime",label:"登录时间",align:"center",width:"160",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jointime",align:"center",label:"加入时间",width:"160",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"===e.row.status?a("span",{staticStyle:{color:"#43A047"}},[t._v("正常")]):"hidden"===e.row.status?a("span",{staticStyle:{color:"#999999"}},[t._v("不正常")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"chakan",on:{click:function(a){return a.stopPropagation(),t.chakanClick(e.row,t.tableData[e.$index].id)}}},[t._v("查看")]),t._v(" "),a("p",{staticClass:"motify",on:{click:function(a){return a.stopPropagation(),t.motifyClick(e.row,t.tableData[e.$index].id)}}},[t._v("修改")]),t._v(" "),a("p",{staticClass:"delete",on:{click:function(a){return a.stopPropagation(),t.deleteClick(e.row,t.tableData[e.$index].id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pageshow,expression:"pageshow"}],staticClass:"paging"},[0!=t.total?a("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[8,20,40,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.current=e},"update:current-page":function(e){t.current=e}}}):t._e()],1)],1)])])])],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("MKqU"),a("bizq")},"data-v-e37bd4ac",null);e.default=r.exports},bizq:function(t,e){}});